<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by TEMPLATED
http://templated.co
Released for free under the Creative Commons Attribution License

Name       : WellFormed 
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20130731

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900" rel="stylesheet" />
<link href="default.css" rel="stylesheet" type="text/css" media="all" />
<link href="fonts.css" rel="stylesheet" type="text/css" media="all" /><script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
<script>
    var waypts=[];
    var ways=[];
    function initialize() {
    	var styles = [
    {
        "featureType": "landscape.natural",
        "stylers": [
            {
                "color": "#bcddff"
            }
        ]
    },
    {
        "featureType": "road.highway",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "color": "#5fb3ff"
            }
        ]
    },
    {
        "featureType": "road.arterial",
        "stylers": [
            {
                "color": "#ebf4ff"
            }
        ]
    },
    {
        "featureType": "road.local",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "color": "#ebf4ff"
            }
        ]
    },
    {
        "featureType": "road.local",
        "elementType": "geometry.stroke",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "#93c8ff"
            }
        ]
    },
    {
        "featureType": "landscape.man_made",
        "elementType": "geometry",
        "stylers": [
            {
                "color": "#c7e2ff"
            }
        ]
    },
    {
        "featureType": "transit.station.airport",
        "elementType": "geometry",
        "stylers": [
            {
                "saturation": 100
            },
            {
                "gamma": 0.82
            },
            {
                "hue": "#0088ff"
            }
        ]
    },
    {
        "elementType": "labels.text.fill",
        "stylers": [
            {
                "color": "#1673cb"
            }
        ]
    },
    {
        "featureType": "road.highway",
        "elementType": "labels.icon",
        "stylers": [
            {
                "saturation": 58
            },
            {
                "hue": "#006eff"
            }
        ]
    },
    {
        "featureType": "poi",
        "elementType": "geometry",
        "stylers": [
            {
                "color": "#4797e0"
            }
        ]
    },
    {
        "featureType": "poi.park",
        "elementType": "geometry",
        "stylers": [
            {
                "color": "#209ee1"
            },
            {
                "lightness": 49
            }
        ]
    },
    {
        "featureType": "transit.line",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "color": "#83befc"
            }
        ]
    },
    {
        "featureType": "road.highway",
        "elementType": "geometry.stroke",
        "stylers": [
            {
                "color": "#3ea3ff"
            }
        ]
    },
    {
        "featureType": "administrative",
        "elementType": "geometry.stroke",
        "stylers": [
            {
                "saturation": 86
            },
            {
                "hue": "#0077ff"
            },
            {
                "weight": 0.8
            }
        ]
    },
    {
        "elementType": "labels.icon",
        "stylers": [
            {
                "hue": "#0066ff"
            },
            {
                "weight": 1.9
            }
        ]
    },
    {
        "featureType": "poi",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "hue": "#0077ff"
            },
            {
                "saturation": -7
            },
            {
                "lightness": 24
            }
        ]
    }
]
        var geocoder = new google.maps.Geocoder();
        var mapOptions = {
                            zoom: 17,
                            mapTypeControlOptions: {mapTypeIds: ['Styled']},
                            center: new google.maps.LatLng(10.409390, -66.883099),
                            mapTypeId: google.maps.MapTypeId.ROADMAP,
                            disableDefaultUI: true
                         };
        var map = new google.maps.Map(document.getElementById('surabaya'),mapOptions);

        google.maps.event.addListener(map, 'click', function(e) {
            placeMarker(e.latLng, map);
            var input=e.latLng;
            var lat = parseFloat(input.lat());
            var lng = parseFloat(input.lng());
            var latlng = new google.maps.LatLng(lat, lng);
            geocoder.geocode({'latLng': latlng}, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    var add=results[1].formatted_address;
                    waypts.push({
                        location:add,
                        stopover:true
                    });
                    //alert(JSON.stringify(waypts));
					if(waypts.length>2) {
					    ways = [];
					    for ( var i = 1; i <= waypts.length - 2 ; i++) {
					       ways.push({
					         location:waypts[i].location,
					         stopover:true
					       });
					    }
					  }
					  makeroute(waypts);
                }
            });
        });

        <!--  **************    for route between markers   *******************  -->
        function makeroute(waypts){
            var directionsDisplay;
            var directionsService = new google.maps.DirectionsService();
            directionsDisplay = new google.maps.DirectionsRenderer({
                suppressMarkers: false, //false it if you want a marker from the direction service
                polylineOptions: {
                    strokeColor: 'blue', //"black",
                    strokeOpacity: 1.0,
                    strokeWeight: 3
                }
            });

            var start = waypts[0].location;//"Bopal, Ahmedabad, Gujarat, India";
            var end = waypts[waypts.length-1].location;//"Nikol, Ahmedabad, Gujarat, India";

            if(waypts.length>1) {
                var request = {
                                 origin:start,
                                 destination:end,
                                 waypoints:ways,
                                 travelMode: google.maps.DirectionsTravelMode.DRIVING
                               };
                directionsService.route(request, function(response, status) {
                    if (status == google.maps.DirectionsStatus.OK) {
                        directionsDisplay.setDirections(response);
                    }
                });

                directionsDisplay.setMap(map);
                google.maps.event.addDomListener(window, 'load', initialize);
            }
        }
    }

    function placeMarker(position, map) {
        var marker = new google.maps.Marker({
            position: position,
            //map: map
        });
        // map.panTo(position);
    }

    google.maps.event.addDomListener(window, 'load', initialize);
</script>

<!--[if IE 6]><link href="default_ie6.css" rel="stylesheet" type="text/css" /><![endif]-->

</head>
<body>
<div id="logo" class="container">
	<h1><img src= "imagenes/logo.png" width=5%><a href="#">  TRAIN<span>SPOT</span></a></h1>
</div>
<div id="menu" class="container">
	<ul>
		<li><a href="index.html" accesskey="1" title="">Mapa</a></li>
		<li><a href="realidad.html" accesskey="1" title=""><img src="imagenes/icon_realidad.png" style="width:40px;padding-right:10px;"/> Realidad Aumentada</a></li>
		<li class="current_page_item"><a href="ruta.html" accesskey="2" title=""><img src="imagenes/icon_ruta.png" style="width:40px;padding-right:10px;"/>Ruta</a></li>
		<li><a href="#" accesskey="3" title=""><img src="imagenes/icon_alerta.png" style="width:40px;padding-right:10px;"/>Incidente</a></li>
		<li></li><li></li>
		<li><a href="configuracion.html" accesskey="4" title=""><img src="imagenes/icon_config.png" style="width:40px;padding-right:10px;"/>Configuracion</a></li>
	</ul>
</div>
<div id="banner" class="container">
<div id="surabaya" style="width:100%; height:700px"></div>
</div>
</body>
</html>
